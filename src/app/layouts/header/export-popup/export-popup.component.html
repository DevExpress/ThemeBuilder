<app-popup
    title="Theme Export"
    (popupShown)="popupShown()"
    #popup
>   
    <div class="editor-item first">
        <label>Color scheme name</label>
        <dx-text-box [(value)]="schemeName" [width]="400" valueChangeEvent="keyup" [disabled]="settingDisabled" (onValueChanged)="valueChange($event)">
            <dx-validator>
                <dxi-validation-rule 
                    type="pattern" 
                    pattern="^[\w-_\.]*$" 
                    message="Only alphabetic and numeric characters, underscores, dots, and hyphens are allowed.">
                </dxi-validation-rule>
                <dxi-validation-rule 
                    type="required" 
                    message="Color scheme name is required.">
                </dxi-validation-rule>
            </dx-validator>
        </dx-text-box>
    </div>
    <div class="editor-item">
        <label>Save as a color swatch</label>
        <dx-check-box [(value)]="makeSwatch" [disabled]="settingDisabled" (onValueChanged)="valueChange($event)"></dx-check-box>
    </div>
    <div class="editor-item" [ngClass]="{ hidden: !showOutputFile }">
        <label>Output file path</label>
        <dx-text-box [value]="outputFile" [readOnly]="true" [width]="400"></dx-text-box>
    </div>
    <dx-tab-panel
        #tabPane 
        class="tabs first" 
        [height]="140"
        [(selectedIndex)]="selectedIndex">
        <dxi-item title="Export CSS">              
            <div class="buttons">
                <app-button type="apply" [disabled]="settingDisabled" [width]="270" title="Save to File" (clicked)="exportCss()">Save to File</app-button>
                <app-button 
                    type="apply" 
                    [width]="270" 
                    title="Display CSS" 
                    [disabled]="applyButtonDisabled" 
                    (clicked)="displayFileContent()">
                    Display CSS
                </app-button>
            </div>
        </dxi-item>
        <dxi-item title="Export Metadata">
            <div class="buttons">
                <app-button type="apply" [disabled]="settingDisabled" [width]="270" title="Save to File" (clicked)="exportMeta()">Save to File</app-button>
                <app-button 
                    type="apply" 
                    [width]="270" 
                    title="Display Metadata" 
                    [disabled]="applyButtonDisabled" 
                    (clicked)="displayFileContent()">
                    Display Metadata
                </app-button>
            </div>
        </dxi-item>
    </dx-tab-panel>
    <dx-text-area 
        id="file-content" 
        class="first" 
        [readOnly]="true" 
        [height]="150" 
        [value]="fileContent[selectedIndex]" 
        #textArea>
    </dx-text-area>
    <dx-load-panel 
        [visible]="loadIndicatorVisible" 
        [position]="{ of: '#file-content' }" 
        [showPane]="false" 
        [shading]="true" 
        shadingColor="rgba(232, 232, 232, 0.5)"
        message="Generating...">
    </dx-load-panel>
</app-popup>
