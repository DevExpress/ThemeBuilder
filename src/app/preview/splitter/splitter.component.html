<div *ngIf="isExpanded.getValue(); then expandedBlock; else collapsedBlock"></div>

<ng-template #collapsedBlock>
  <dx-splitter id="splitter">
    <dxi-item
      [resizable]="true"
      template="Left Pane"
    ></dxi-item>
  
    <dxi-item [resizable]="true">
      <dx-splitter orientation="vertical">
        <dxi-item
          [resizable]="true"
          [collapsible]="true"
          template="Nested Top Pane"
        ></dxi-item>
        <dxi-item
          [resizable]="true"
          [collapsible]="true"
          template="Nested Bottom Pane"
        ></dxi-item>
  
        <ng-container *ngFor="let pane of paneContentTemplates">
          <div
            *dxTemplate="let data of pane.name"
            class="pane-content"
            tabindex="0"
          >
            <ng-template
              [ngTemplateOutlet]="customPaneTemplate"
              [ngTemplateOutletContext]="{ data: data, title: pane.name }"
            >
            </ng-template>
          </div>
        </ng-container>
      </dx-splitter>
    </dxi-item>
    <ng-container *ngFor="let pane of paneContentTemplates">
      <div *dxTemplate="let data of pane.name" class="pane-content" tabindex="0">
        <ng-template
          [ngTemplateOutlet]="customPaneTemplate"
          [ngTemplateOutletContext]="{ data: data, title: pane.name }"
        >
        </ng-template>
      </div>
    </ng-container>
  </dx-splitter>
  
  <ng-template #customPaneTemplate let-data="data" let-title="title">
    <div class="pane-title">{{ title }}</div>
    <div class="pane-state">{{ getPaneState(data) }}</div>
  </ng-template>
</ng-template>

<ng-template #expandedBlock>
  <dx-splitter
    id="splitter"
    height="320px"
  >
    <dxi-item
      [resizable]="true"
      size="240px"
      template="Left Pane"
    ></dxi-item>
    <dxi-item [resizable]="true">
      <dx-splitter orientation="vertical">
        <dxi-item
          [resizable]="true"
          [collapsible]="true"
          maxSize="75%"
          template="Central Pane"
        ></dxi-item>
        <dxi-item [resizable]="true" [collapsible]="true">
          <dx-splitter>
            <dxi-item
              [resizable]="true"
              [collapsible]="true"
              minSize="5%"
              size="30%"
              template="Nested Left Pane"
            ></dxi-item>
            <dxi-item
              [resizable]="true"
              template="Nested Central Pane"
            ></dxi-item>
            <dxi-item
              [resizable]="true"
              [collapsible]="true"
              minSize="5%"
              size="30%"
              template="Nested Right Pane"
            ></dxi-item>
  
            <ng-container *ngFor="let pane of paneContentTemplates">
              <div
                *dxTemplate="let data of pane.name"
                class="pane-content"
                tabindex="0"
              >
                <ng-template
                  [ngTemplateOutlet]="customPaneTemplate"
                  [ngTemplateOutletContext]="{ data: data, title: pane.name }"
                >
                </ng-template>
              </div>
            </ng-container>
          </dx-splitter>
        </dxi-item>
  
        <ng-container *ngFor="let pane of paneContentTemplates">
          <div
            *dxTemplate="let data of pane.name"
            class="pane-content"
            tabindex="0"
          >
            <ng-template
              [ngTemplateOutlet]="customPaneTemplate"
              [ngTemplateOutletContext]="{ data: data, title: pane.name }"
            >
            </ng-template>
          </div>
        </ng-container>
      </dx-splitter>
    </dxi-item>
    <dxi-item
      [resizable]="false"
      [collapsible]="false"
      size="240px"
      template="Right Pane"
    ></dxi-item>
  
    <ng-container *ngFor="let pane of paneContentTemplates">
      <div *dxTemplate="let data of pane.name" class="pane-content" tabindex="0">
        <ng-template
          [ngTemplateOutlet]="customPaneTemplate"
          [ngTemplateOutletContext]="{ data: data, title: pane.name }"
        >
        </ng-template>
      </div>
    </ng-container>
  </dx-splitter>
  
  <ng-template #customPaneTemplate let-data="data" let-title="title">
    <div class="pane-title">{{ title }}</div>
    <div class="pane-state">{{ getPaneState(data) }}</div>
  </ng-template>
  
</ng-template>
